# Banana AI Studio - 使用指南

## 项目概述
Banana AI Studio 是一个集成多米API的AI图片编辑应用，支持四种编辑模式：线框图、多角度视图、场景替换和AI融合设计。

## 部署信息
- **网站地址**: https://itvoygykpfe7.space.minimaxi.com
- **版本**: v0.9.15
- **在线演示**: 可直接使用卡密 Vh1rI1dZqO7ObmQ 进行体验（1000积分，余额900）
- **Supabase URL**: https://gxjjaruksjnhdiixqtae.supabase.co
- **Edge Function**: https://gxjjaruksjnhdiixqtae.supabase.co/functions/v1

## 🆕 最新更新 (v0.9.15)
- ✅ 修复卡密余额显示错误 - 正确显示总面额和余额
- ✅ 全新液态玻璃风格进度条 - 半透明立体效果，绿色/红色视觉区分
- ✅ 优化布局 - 进度条水平放置，高度减少2/3，宽度增加2倍
- ✅ 余额警告系统 - 低余额提醒和闪烁效果

## 功能特性

### 1. 线框图模式
将图片转换为工程或概念线框图

**配置选项**:
- **线框图类型**: 工程线框图、概念线框图
- **细节程度**: 低细节、中等细节、高细节
- **线框风格**: 极简风格、技术风格、艺术风格

### 2. 多角度视图模式
从不同角度重新绘制对象

**配置选项**:
- **视图类型**: 三视图、自由视角、透视视图
- **视角角度**: 0-360度可调（自由视角模式）
- **仰角角度**: -90至90度可调（自由视角模式）
- **透视类型**: 一点透视、两点透视、三点透视（透视视图模式）

### 3. 场景替换模式
将对象融合到新的场景环境中

**配置选项**:
- **场景来源**: 上传场景图片、使用预设提示词
- **融合强度**: 0-100%可调
- **预设场景**: 现代办公室、工业风格、自然环境、夜晚城市、极简主义、电商产品宣传、户外运动、家庭聚会

### 4. AI融合设计模式
基于用户上传的参考图片，对原产品图片进行智能融合设计，创造全新产品

**配置选项**:
- **颜色材质融合**: 无/轻微/中等/强烈/完全
- **形态结构融合**: 无/轮廓/比例/结构/完全  
- **设计风格**: 极简/复古/科技/有机/奢华/工业
- **细节级别**: 概念/简化/标准/精细/极致
- **功能概念融合**: 无/暗示/隐喻/整合/重构
- **预设组合**: 提供3个专业预设组合方案
- **自定义要求**: 支持用户自定义设计需求

## 💳 卡密系统

### 特色功能
- **自动激活**: 未激活卡密自动激活
- **实时扣费**: 每次生成图片扣除10积分
- **余额显示**: 液态玻璃进度条显示余额和总面额
- **低余额警告**: 余额低于50时提醒，低于10时严重警告
- **无缝切换**: 支持更换卡密功能

### 测试卡密
- **卡密**: Vh1rI1dZqO7ObmQ
- **总面额**: 1000积分
- **当前余额**: 900积分
- **状态**: 已激活，可直接使用

## 使用流程

### 1. 输入卡密
- 点击"输入卡密"按钮
- 输入有效的卡密代码
- 系统自动激活并显示余额

### 2. 上传原始图片
- 点击或拖拽上传图片到"上传图片"区域
- 支持 JPG、PNG 格式
- 最大文件大小：10MB

### 3. 选择编辑模式
- 点击四个编辑模式中的任意一个
- 根据需求选择对应的模式和参数
- AI融合设计模式需要额外上传参考图片

### 4. 配置参数
- 在设置面板中调整参数
- 每个模式有不同的配置选项

### 5. 生成图片
- 点击"生成图片"按钮
- 等待 AI 处理（通常需要几秒钟）
- 每次生成扣除10积分
- 生成的图片将显示在右侧区域

### 6. 下载结果
- 点击"下载生成图"按钮保存结果
- 点击"放大预览"查看高清大图

## API 密钥配置

**重要**: 应用需要配置 DOMINO_API_KEY (Google Gemini API Key) 才能使用 AI 生成功能。

详细配置步骤请查看：[API 密钥配置指南](docs/API_KEY_SETUP.md)

### 快速配置
1. 访问 https://aistudio.google.com/apikey 获取 API 密钥
2. 在 Supabase Dashboard 中配置环境变量 `DOMINO_API_KEY`
3. 立即生效，无需重新部署

## 技术架构

### 前端
- **框架**: React 18.3 + TypeScript
- **构建工具**: Vite 6.0
- **样式**: Tailwind CSS 3.4
- **图标**: Lucide React
- **包管理**: pnpm

### 后端
- **平台**: Supabase
- **Edge Function**: Deno 运行时
- **存储**: Supabase Storage (ai-generated-images bucket)
- **API**: Google Gemini 2.5 Flash Image Preview
- **卡密系统**: 自建API，支持激活、查询、扣费

## 开发指南

### 本地开发
```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev

# 构建生产版本
pnpm build

# 预览生产构建
pnpm preview
```

### 部署
```bash
# 构建
pnpm build

# dist/ 目录包含可部署的静态文件
```

## 测试状态
✅ 所有功能测试通过 (v0.9.15)
- ✅ 卡密管理系统（激活、查询、扣费）
- ✅ 液态玻璃进度条界面
- ✅ 页面加载和渲染
- ✅ 图片上传功能
- ✅ 四种编辑模式切换（线框图、多角度视图、场景替换、AI融合设计）
- ✅ 参数配置面板
- ✅ AI融合设计双图片上传系统
- ✅ 英文提示词系统
- ✅ 响应式设计
- ✅ 低余额警告系统

## 已知限制
1. 需要配置 API 密钥后才能使用 AI 生成功能
2. 图片大小限制为 10MB
3. 支持的格式：JPG、PNG、WEBP
4. 每次AI生成扣除10积分

## 更新日志

### v0.9.15 (2025-11-11)
- 🔧 修复卡密余额显示bug - 正确显示总面额和余额
- ✨ 新增液态玻璃风格进度条组件
- 🎨 优化UI布局 - 进度条水平放置，尺寸调整
- ⚠️ 新增余额警告系统
- 🔄 优化卡密状态管理逻辑

### v0.9.14 (2025-11-11)
- ✨ 首次引入液态玻璃进度条设计
- 🎨 进度条包含绿色（余额）/红色（已用）视觉区分
- 🖱️ 添加滑块交界面设计

### v0.9.13 (2025-11-11)
- 🔧 修复卡密激活后余额显示错误
- 📊 优化余额计算逻辑

### v0.9.12 (2025-11-10)
- ✨ 完整的卡密管理系统
- 💳 支持卡密激活、查询、扣费功能
- 🔐 安全的卡密状态管理
- ⚡ 实时余额更新

## 后续优化建议
1. 添加图片预处理（压缩、格式转换）
2. 实现生成历史记录
3. 支持批量处理
4. 添加更多预设场景和风格
5. 优化移动端体验
6. 集成用户账户系统

## 许可证
MIT License

## 联系与支持
如有问题，请查看 Supabase 日志或浏览器控制台获取详细错误信息。
测试用卡密: Vh1rI1dZqO7ObmQ (1000积分，余额900)